<div class="card">
  <p-toast></p-toast>
  <p-toolbar>
    <ng-template pTemplate="left">
      <span class="text-xl font-bold">Carburants véhicules</span>
    </ng-template>
  </p-toolbar>
  
  <p-table #table [value]="carburantVehicules" [paginator]="true" [rows]="10" [rowsPerPageOptions]="[5, 10, 20]"
    [showCurrentPageReport]="true" currentPageReportTemplate="Affichage de {first} à {last} sur {totalRecords} entrées"
    [globalFilterFields]="['libelle', 'eosLibelle', 'code', 'eosCode']" [dataKey]="'id'"
    styleClass="p-datatable-gridlines p-datatable-sm p-datatable-striped p-datatable-hoverable-rows">
  
    <ng-template pTemplate="header">
      <tr>
        <th pSortableColumn="libelle"><div class="flex align-items-center gap-2"><p-sortIcon field="libelle"></p-sortIcon>Libelle<p-columnFilter type="text" field="libelle" display="menu" class="ml-auto"></p-columnFilter></div></th>
        <th pSortableColumn="eosLibelle"><div class="flex align-items-center gap-2"><p-sortIcon field="eosLibelle"></p-sortIcon>EosLibelle<p-columnFilter type="text" field="eosLibelle" display="menu" class="ml-auto"></p-columnFilter></div></th>
        <th pSortableColumn="code"><div class="flex align-items-center gap-2"><p-sortIcon field="code"></p-sortIcon>Code<p-columnFilter type="text" field="code" display="menu" class="ml-auto"></p-columnFilter></div></th>
        <th pSortableColumn="eosCode"><div class="flex align-items-center gap-2"><p-sortIcon field="eosCode"></p-sortIcon>EosCode<p-columnFilter type="text" field="eosCode" display="menu" class="ml-auto"></p-columnFilter></div></th>
        <th>Action</th>
      </tr>
    </ng-template>
  
    <ng-template pTemplate="body" let-rowData>
      <tr [ngStyle]="getRowStyle(rowData)">
        <td>{{ rowData.libelle }}</td>
        <td>{{ rowData.eosLibelle }}</td>
        <td>{{ rowData.code }}</td>
        <td>{{ rowData.eosCode }}</td>
        <td>
          <button *ngIf="rowData.code && !rowData.eosCode" pButton type="button" icon="pi pi-pencil" label="Modifier"
            class="p-button-sm p-button-primary" (click)="edit(rowData)">
          </button>
        </td>
      </tr>
    </ng-template>
  
    <ng-template pTemplate="emptymessage">
      <tr>
        <td colspan="5" class="text-center">Aucun carburant trouvé</td>
      </tr>
    </ng-template>
  </p-table>
</div>


<p-dialog [(visible)]="displayDialog" [dismissableMask]="true" [modal]="true" [style]="{ width: '400px' }" header="Formulaire">
  <form [formGroup]="carburantForm">
    <div class="p-fluid">
      <div class="p-field">
        <label for="libelle">Libelle</label>
        <input id="libelle" type="text" pInputText formControlName="Libelle" disabled />
      </div>
      <div class="p-field">
        <label for="eosCode">New Lille</label>
        <p-dropdown
          optionLabel="EosLibelle"
          optionValue="EosCode"
          placeholder="Fait votre choix"
          formControlName="EosCode"  [appendTo]="'body'">
        </p-dropdown>
      </div>
    </div>
  </form>

  <ng-template pTemplate="footer">
    <button pButton label="Annuler" icon="pi pi-times" (click)="onCancel()" class="p-button-text"></button>
    <button pButton label="Enregistrer" icon="pi pi-check" [disabled]="!carburantForm.get('EosCode')?.value" (click)="onSubmit()" class="p-button-primary"></button>
  </ng-template>
</p-dialog>