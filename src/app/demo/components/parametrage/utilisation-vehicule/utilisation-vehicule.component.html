<!-- utilisation-vehicule.component.html -->
<div class="card">
  <p-toast></p-toast>
  
  <p-dialog header="Formulaire" [(visible)]="visible" [modal]="true" [style]="{width: '50vw'}">
    <p-card>
      <form>
        <div class="p-fluid">
          <div class="p-field">
            <label for="libelle">Libelle</label>
            <input pInputText id="libelle" [(ngModel)]="model.libelle" name="libelle" disabled />
          </div>
          <div class="p-field">
            <label for="eosLibelle">New Libelle</label>
            <p-dropdown  [options]="filterUtilisationVehicules" 
                       [(ngModel)]="model.eosLibelle" name="eosLibelle" optionLabel="eosLibelle" optionValue="eosLibelle"  [appendTo]="'body'">
              <ng-template pTemplate="item" let-item>
                {{item.eosLibelle}}
              </ng-template>
            </p-dropdown>
          </div>
        </div>
      </form>
    </p-card>
    
    <ng-template pTemplate="footer">
      <p-button icon="pi pi-times" label="Annuler" (click)="cancel()" styleClass="p-button-text"></p-button>
      <p-button icon="pi pi-check" label="Enregistrer" (click)="submit()" [disabled]="!model.eosLibelle"></p-button>
    </ng-template>
  </p-dialog>

  <p-toolbar>
    <ng-template pTemplate="left">
      <h4>Utilisation Vehicules</h4>
    </ng-template>
  </p-toolbar>

  <p-table [value]="utilisationVehicules" [rowStyleClass]="rowStyleFunc"  [paginator]="true"  [rows]="10"
  [rowsPerPageOptions]="[5,10,25,50]"
 styleClass="p-datatable-sm p-datatable-striped p-datatable-hoverable-rows">
    <ng-template pTemplate="header">
      <tr>
        <th>Libelle</th>
        <th>Eos Libelle</th>
        <th>Périodicité</th>
        <th>{{utilisationVehicules.length}}</th>
      </tr>
    </ng-template>
    <ng-template pTemplate="body" let-item >
      <tr>
        <td>{{item.libelle}}</td>
        <td>{{item.eosLibelle}}</td>
        <td>{{item.periodicite}}</td>
        <td>
          <div class="p-d-flex p-jc-end">
            <p-button *ngIf="item.libelle && !item.eosLibelle" icon="pi pi-pencil" label="Modifier" (click)="edit(item)" styleClass="p-button-rounded p-button-primary"></p-button>
          </div>
        </td>
      </tr>
    </ng-template>
  </p-table>
</div>